<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Knight's Tour 5√ó5 ‚Äî Auto Move</title>
<style>
  :root{
    --bg: #f7f9fc;
    --panel: #ffffff;
    --accent: #4b8ef9;
    --accent-2:#7dc3ff;
    --text: #1a2b3c;
    --muted:#6b7c93;
    --cell:#f0f4fa;
    --cell-alt:#e7eef8;
    --cell-visited:#d7ebff;
    --cell-current:#ffeaa7;
    --cell-path:#c9e6ff;
    --shadow: 0 10px 30px rgba(36, 61, 102, 0.12);
  }
  *{ box-sizing: border-box; }
  body{
    margin:0; padding:0;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(35rem 35rem at 10% 10%, #fff, transparent 60%),
      radial-gradient(45rem 45rem at 90% 20%, #f2f7ff, transparent 60%),
      linear-gradient(180deg, var(--bg), #eef3fb 70%);
    color: var(--text);
    min-height: 100svh;
    display:flex; align-items:center; justify-content:center;
    padding: 24px;
  }
  .app{
    width:min(960px, 96vw);
    background: var(--panel);
    border-radius: 20px;
    box-shadow: var(--shadow);
    padding: 20px 20px 24px;
  }
  header{
    display:flex; align-items: center; justify-content: space-between; gap:12px;
    padding: 6px 6px 14px;
    border-bottom: 1px solid #e6edf7;
  }
  .title{
    display:flex; align-items:center; gap:12px;
  }
  .logo{
    width:36px; height:36px; border-radius:10px;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display:grid; place-items:center; color:white; font-weight:800;
    box-shadow: 0 6px 16px rgba(75,142,249,.35);
  }
  .subtitle{ color: var(--muted); font-size: 14px; }

  .controls{
    display:flex; flex-wrap:wrap; gap:10px;
  }
  button{
    appearance:none; border:0; cursor:pointer;
    padding:10px 14px; border-radius:12px; font-weight:700;
    box-shadow: 0 4px 10px rgba(75,142,249,.15);
    transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
  }
  .primary{
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color:white;
  }
  .ghost{
    background:#eef4ff; color:#1b3b7a;
  }
  .soft{
    background:#f2f6fc; color:#2b3b4d;
  }
  button:active{ transform: translateY(1px); }

  main{
    display:grid; grid-template-columns: 1fr 340px; gap: 18px;
    margin-top: 18px;
  }
  @media (max-width: 860px){
    main{ grid-template-columns: 1fr; }
  }

  .board-wrap{
    padding:16px;
    background: linear-gradient(180deg,#fff, #f7fbff);
    border-radius: 16px;
    border: 1px solid #e6edf7;
  }
  .board{
    --n:5;
    display:grid;
    grid-template-columns: repeat(var(--n), 1fr);
    grid-auto-rows: min(80px, 18vw);
    gap:8px;
  }
  .cell{
    position:relative;
    border-radius: 12px;
    background: var(--cell);
    display:grid; place-items:center;
    font-size: 18px; font-weight: 700;
    box-shadow: inset 0 -2px 0 rgba(0,0,0,.03);
    transition: background .25s ease, transform .08s ease, outline .25s ease;
    outline: 2px solid transparent;
  }
  .cell:nth-child(odd){ background: var(--cell); }
  .cell:nth-child(even){ background: var(--cell-alt); }
  .cell.visited{ background: var(--cell-visited); }
  .cell.path{ background: var(--cell-path); }
  .cell.current{
    background: var(--cell-current);
    outline-color: #ffd166;
    transform: translateY(-1px);
    box-shadow: 0 8px 16px rgba(255,209,102,.35), inset 0 -2px 0 rgba(0,0,0,.03);
  }
  .badge{
    position:absolute; top:8px; left:8px;
    background:#fff; border:1px solid #e6edf7; color:#456; font-weight:700;
    border-radius: 10px; font-size: 12px; padding:2px 8px;
    box-shadow: 0 6px 12px rgba(20,40,80,.06);
  }
  .knight{
    font-size: 28px;
    line-height: 1;
    filter: drop-shadow(0 2px 3px rgba(0,0,0,.12));
  }

  .side{
    padding:16px;
    background: linear-gradient(180deg,#fff, #f8fbff);
    border-radius: 16px;
    border: 1px solid #e6edf7;
  }
  .info-row{
    display:flex; align-items:center; justify-content:space-between;
    padding:10px 0; border-bottom: 1px dashed #e6edf7; font-weight:700;
  }
  .info-row:last-child{ border-bottom: 0; }
  .muted{ color: var(--muted); font-weight:600; }
  .hint{
    margin-top: 14px; font-size: 13px; color: var(--muted);
    background:#f5f8ff; border:1px solid #e6edf7; padding:10px 12px; border-radius:12px;
  }
  .foot{
    margin-top:16px; font-size:12px; color:#789;
    text-align:center;
  }
</style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">
        <div class="logo">N‚ôû</div>
        <div>
          <div style="font-size:20px; font-weight:800;">Knight‚Äôs Tour ‚Äî 5√ó5</div>
          <div class="subtitle">Auto-generated tour ‚Ä¢ Click <b>Auto Move</b> to step through</div>
        </div>
      </div>
      <div class="controls">
        <button id="autoBtn" class="primary">Auto Move ‚ñ∂</button>
        <button id="newBtn" class="ghost">New Tour üîÅ</button>
        <button id="resetBtn" class="soft">Reset ‚ü≤</button>
      </div>
    </header>

    <main>
      <section class="board-wrap">
        <div id="board" class="board" aria-label="5 by 5 chessboard"></div>
      </section>

      <aside class="side">
        <div class="info-row"><span class="muted">Board</span><span>5 √ó 5</span></div>
        <div class="info-row"><span class="muted">Current Step</span><span id="stepOut">0 / 25</span></div>
        <div class="info-row"><span class="muted">Start Square</span><span id="startOut">‚Äî</span></div>
        <div class="info-row"><span class="muted">Status</span><span id="statusOut">Ready</span></div>
        <div class="hint">Tip: ‚ÄúNew Tour‚Äù random start se ek solvable tour pre-compute hota hai (fast backtracking + smart ordering). Phir ‚ÄúAuto Move‚Äù har click pe next move dikhata hai.</div>
        <div class="foot">Made for you ‚Äî deploy static as <code>index.html</code> on Vercel.</div>
      </aside>
    </main>
  </div>

<script>
(() => {
  const N = 5;
  const MOVES = [
    [ 2, 1],[ 1, 2],[-1, 2],[-2, 1],
    [-2,-1],[-1,-2],[ 1,-2],[ 2,-1],
  ];
  const boardEl = document.getElementById('board');
  const stepOut = document.getElementById('stepOut');
  const startOut = document.getElementById('startOut');
  const statusOut = document.getElementById('statusOut');
  const autoBtn = document.getElementById('autoBtn');
  const newBtn = document.getElementById('newBtn');
  const resetBtn = document.getElementById('resetBtn');

  let cells = [];
  let tour = [];     // array of [r,c]
  let step = 0;      // index into tour (0..24)
  let started = false;

  function id(r,c){ return r*N + c; }
  function inBounds(r,c){ return r>=0 && c>=0 && r<N && c<N; }

  function buildBoard(){
    boardEl.innerHTML = '';
    cells = [];
    for(let r=0; r<N; r++){
      for(let c=0; c<N; c++){
        const d = document.createElement('div');
        d.className = 'cell';
        d.dataset.r = r; d.dataset.c = c;
        const badge = document.createElement('div');
        badge.className = 'badge'; badge.textContent = '';
        d.appendChild(badge);
        boardEl.appendChild(d);
        cells.push(d);
      }
    }
  }

  function clearMarks(){
    cells.forEach(cell=>{
      cell.classList.remove('visited','current','path');
      cell.querySelector('.badge').textContent = '';
      cell.innerHTML = cell.innerHTML.split('<span class="knight">')[0]; // remove knight if any
      const existingKnight = cell.querySelector('.knight');
      if(existingKnight) existingKnight.remove();
    });
    step = 0;
    started = false;
    updateHUD();
  }

  function placeStep(idx, cls){
    const [r,c] = tour[idx];
    const cell = cells[id(r,c)];
    cell.classList.add(cls);
    const badge = cell.querySelector('.badge');
    badge.textContent = idx+1; // human-friendly numbering
    if(cls === 'current'){
      const k = document.createElement('span');
      k.className = 'knight';
      k.textContent = '‚ôû';
      cell.appendChild(k);
    }
  }

  function updateHUD(statusText){
    stepOut.textContent = `${Math.min(step, N*N)} / ${N*N}`;
    if(tour.length){
      const [sr, sc] = tour[0];
      startOut.textContent = `(${sr+1}, ${sc+1})`;
    }else{
      startOut.textContent = '‚Äî';
    }
    if(statusText) statusOut.textContent = statusText;
  }

  // Order moves by Warnsdorff degree to speed up backtracking
  function nextMoves(r,c, visited){
    const list = [];
    for(const [dr,dc] of MOVES){
      const nr=r+dr, nc=c+dc;
      if(inBounds(nr,nc) && !visited[id(nr,nc)]){
        // onward degree
        let deg = 0;
        for(const [dr2,dc2] of MOVES){
          const rr = nr+dr2, cc = nc+dc2;
          if(inBounds(rr,cc) && !visited[id(rr,cc)]) deg++;
        }
        list.push({r:nr,c:nc,deg});
      }
    }
    list.sort((a,b)=>a.deg-b.deg);
    return list;
  }

  // Backtracking solver that almost always finds a tour fast for 5x5
  function solveTour(startR, startC){
    const total = N*N;
    const path = new Array(total);
    const visited = new Array(total).fill(false);
    path[0] = [startR, startC];
    visited[id(startR,startC)] = true;

    function dfs(k, r, c){
      if(k === total) return true;
      const moves = nextMoves(r,c, visited);
      for(const m of moves){
        const idx = id(m.r, m.c);
        if(!visited[idx]){
          visited[idx] = true;
          path[k] = [m.r, m.c];
          if(dfs(k+1, m.r, m.c)) return true;
          visited[idx] = false;
        }
      }
      return false;
    }

    const ok = dfs(1, startR, startC);
    return ok ? path : null;
  }

  function randomStart(){
    // good starts (centerish) usually faster; bias towards middle
    const candidates = [
      [2,2],[2,1],[1,2],[2,3],[3,2],
      [1,1],[1,3],[3,1],[3,3],
      [0,2],[2,0],[2,4],[4,2],
    ];
    const pick = candidates[Math.floor(Math.random()*candidates.length)];
    return pick;
  }

  function generateTour(){
    statusOut.textContent = 'Generating‚Ä¶';
    // Try multiple random starts quickly until solved (should be immediate on 5√ó5)
    let tries = 0, path = null, start = null;
    while(!path && tries < 50){
      const [sr,sc] = randomStart();
      start = [sr,sc];
      path = solveTour(sr,sc);
      tries++;
    }
    if(!path){
      // Fallback: brute iterate all starts (still instant for 5√ó5)
      outer: for(let sr=0; sr<N; sr++){
        for(let sc=0; sc<N; sc++){
          const p = solveTour(sr,sc);
          if(p){ path = p; start = [sr,sc]; break outer; }
        }
      }
    }
    tour = path || [];
    clearMarks();
    if(tour.length){
      statusOut.textContent = 'Tour ready. Click ‚ÄúAuto Move‚Äù.';
      updateHUD();
    }else{
      statusOut.textContent = 'Failed to generate tour (unexpected). Try New Tour again.';
    }
  }

  function stepOnce(){
    if(!tour.length){
      generateTour();
    }
    if(step === 0){
      // first step: place knight at start
      placeStep(0, 'current');
      step = 1;
      started = true;
      updateHUD('Moving‚Ä¶');
      return;
    }
    if(step < tour.length){
      // move current -> visited, next -> current
      const [pr, pc] = tour[step-1];
      const prevCell = cells[id(pr,pc)];
      prevCell.classList.remove('current');
      prevCell.classList.add('visited');

      placeStep(step, 'current');

      // draw a soft path hint for previous cell
      prevCell.classList.add('path');

      step++;
      updateHUD('Moving‚Ä¶');
      if(step === tour.length){
        updateHUD('Solved ‚úÖ');
      }
    } else {
      updateHUD('Solved ‚úÖ');
    }
  }

  // Wire up UI
  autoBtn.addEventListener('click', stepOnce);
  newBtn.addEventListener('click', () => { generateTour(); });
  resetBtn.addEventListener('click', () => { clearMarks(); statusOut.textContent = 'Reset. Click ‚ÄúAuto Move‚Äù.'; });

  // Init
  buildBoard();
  // Pre-generate a tour so user can start clicking immediately
  generateTour();
})();
</script>
</body>
</html>
